<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Prediction History</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
html, body {
    height: 100%;
    background: #F4F6F5;
    color: #1F2937;
    font-family: "Segoe UI", sans-serif;
}

/* Card container */
.card {
    min-height: 92vh;
    border-radius: 14px;
    background: #FFFFFF;
    border: 1px solid #D1D5DB;
}

/* Title */
h3 {
    color: #2E7D32;
}

/* Table */
.table {
    color: #1F2937;
}

.table thead {
    background-color: #1B5E20;
    color: #ffffff;
}

.table-hover tbody tr:hover {
    background-color: #E8F5E9;
}

/* Borders */
.table-bordered td,
.table-bordered th {
    border-color: #D1D5DB;
}

/* Badges */
.badge {
    background-color: #2E7D32 !important;
}

/* Delete Button */
.btn-danger {
    background-color: #C62828;
    border: none;
}

.btn-danger:hover {
    background-color: #B71C1C;
}
</style>

</head>

<body class="p-3">

<div class="container-fluid">

<div class="card shadow-lg p-4">

<div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="fw-bold"> Prediction History</h3>
</div>

<div class="table-responsive" style="max-height:75vh; overflow-y:auto;">
<table class="table table-bordered table-hover align-middle text-center">

<thead class="table-dark position-sticky top-0">
<tr>
<th>Time</th>
<th>Food</th>
<th>Category</th>
<th>Strength</th>
<th>Weight</th>
<th>Moisture</th>
<th>Shelf Life</th>
<th>Transport</th>
<th>Material</th>
<th>Cost</th>
<th>COâ‚‚</th>
<th>Action</th>
</tr>
</thead>

<tbody>
{% for r in records %}
<tr id="row-{{ r.id }}">
<td>{{ r.created_at.strftime('%d %b %Y %I:%M %p') }}</td>

<td class="fw-semibold">{{ r.food_name }}</td>

<td><span class="badge bg-info badge-pill">{{ r.food_category }}</span></td>

<td>{{ r.strength }}</td>
<td>{{ r.weight_capacity }}</td>
<td>{{ r.moisture_resistance }}</td>
<td>{{ r.shelf_life }}</td>
<td>{{ r.transport_mode }}</td>

<td><span class="badge bg-success badge-pill">{{ r.material }}</span></td>

<td>â‚¹ {{ r.predicted_cost }}</td>
<td>{{ r.predicted_co2 }} kg</td>

<td>
<button class="btn btn-sm btn-danger" onclick="deleteRecord({{ r.id }})">
    ðŸ—‘ Delete
</button>
</td>
</tr>
{% endfor %}
</tbody>

</table>
</div>

</div>
</div>

<script>
function deleteRecord(id) {
    fetch(`/delete/${id}`, { method: "POST" })
    .then(res => res.json())
    .then(data => {
        if (data.success) {
            document.getElementById(`row-${id}`).remove();
        }
    });
}
</script>

</body>
</html>
